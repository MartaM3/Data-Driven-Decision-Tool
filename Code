import pandas as pd
import matplotlib.pyplot as plt

#First ask for number of alternatives and criteria
num_alternatives = int(input("Enter the number of alternatives: "))
criteria = input("Enter criteria names separated by commas (e.g. Cost,Quality,Reliability,Sustainability): ").split(',')
#Second ask for the type of criteria( higher or lower better?)
criteria_type = {}
for c in criteria:
    resp = input(f"Is higher value better for {c}? (yes/no): ").strip().lower()
    criteria_type[c] = True if resp == "yes" else False
#Now insert data for each alternative
alternatives = []
data = {c: [] for c in criteria}

for i in range(num_alternatives):
    name = input(f"Enter name of alternative {i+1}: ")
    alternatives.append(name)
    for c in criteria:
        value = float(input(f"Enter {c} value for {name}: "))
        data[c].append(value)

df = pd.DataFrame(data)
df.insert(0, "Alternative", alternatives)

#Ask for weights
weights = {}
total_weight = 0
for c in criteria:
    weight = float(input(f"Enter weight for {c} (0-1, total should sum to 1): "))
    weights[c] = weight
    total_weight += weight

# Validate total weight
if abs(total_weight - 1) > 0.01:
    print("Warning: Total weights do not sum to 1. Please adjust.")
    
#Data normalization
normalized_df = df.copy()
for c in criteria:
    if not criteria_type[c]:
        # If lower is better, invert scale
        normalized_df[c] = df[c].max() - df[c]
    # Scale between 0 and 1
    normalized_df[c] = normalized_df[c] / normalized_df[c].max()


df["Score"] = 0
for c, w in weights.items():
    df["Score"] += normalized_df[c] * w

df_sorted = df.sort_values(by="Score", ascending=False)

print("\nRanking of alternatives:")
print(df_sorted[["Alternative", "Score"]])

print("\nRecommended option:")
print(df_sorted.iloc[0]["Alternative"])

plt.figure(figsize=(8, 5))
plt.bar(df_sorted["Alternative"], df_sorted["Score"], color='skyblue')
plt.xlabel("Alternative")
plt.ylabel("Score")
plt.title("Ranking of Alternatives")
plt.show()
